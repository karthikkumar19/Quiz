(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{2:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return i})),n.d(e,"i",(function(){return l})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"l",(function(){return m}));var r="ADD_DATA_START",a="ADD_DATA_SUCCESS",o="ADD_DATA_FAIL",u="ADD_DATA_INIT",c="FETCH_DATA_START",i="FETCH_DATA_SUCCESS",l="FETCH_DATA_FAIL",s="AUTH_START",f="AUTH_SUCCESS",d="AUTH_FAIL",p="AUTH_LOGOUT",m="SET_AUTH_REDIRECT_PATH"},20:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return m}));var r=n(2),a=n(17),o=n.n(a),u=function(t,e,n){return{type:r.h,idToken:t,userId:e,redirectPath:n}},c=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:r.f}},i=function(t){return function(e){setTimeout((function(){e(c())}),1e3*t)}},l=function(t,e,n){return function(a){a({type:r.g});var c={email:t,password:e,returnSecureToken:!0},l="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=  AIzaSyCXz6aRRnjsWvWtlF6mgWbubu9ag4gF55c";n||(l="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCXz6aRRnjsWvWtlF6mgWbubu9ag4gF55c"),o.a.post(l,c,n).then((function(t){var e=new Date((new Date).getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("expirationDate",e),localStorage.setItem("userId",t.data.localId),a(u(t.data.idToken,t.data.localId,n)),a(i(t.data.expiresIn))})).catch((function(t){var e;a((e=t.response.data.error,{type:r.e,error:e}))}))}},s=function(t){return{type:r.l,path:t}},f=function(){return function(t){var e=localStorage.getItem("token");if(e){var n=new Date(localStorage.getItem("expirationDate"));if(n<=new Date)t(c());else{var r=localStorage.getItem("userId");t(u(e,r)),t(i((n.getTime()-(new Date).getTime())/1e3))}}else t(c())}},d=n(23),p=function(t,e){return function(n){n({type:r.c}),o.a.post("https://sme-startup.firebaseio.com/profiles.json?auth"+e,t).then((function(e){var a,o;n((a=e.data.name,o=t,{type:r.d,pageId:a,pageData:o}))})).catch((function(t){n(function(t){return{type:r.a,error:t}}(t))}))}},m=function(t,e){return function(t){t({type:r.j}),o.a.get("https://sme-startup.firebaseio.com/profiles.json").then((function(e){var n,a=[];for(var o in e.data)a.push(Object(d.a)({},e.data[o],{id:o}));t((n=a,{type:r.k,data:n}))})).catch((function(e){var n;t((n=e,{type:r.i,error:n}))}))}}},3:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o}));var r=n(23),a=function(t,e){return Object(r.a)({},t,{},e)},o=function(t,e){var n=!0;if(!e)return!0;if(e.required&&(n=""!==t.trim()&&n),e.minLength&&(n=t.length>=e.minLength&&n),e.maxLength&&(n=t.length<=e.maxLength&&n),e.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(t)&&n}if(e.isNumeric){n=/^\d+$/.test(t)&&n}return n}},42:function(t,e,n){t.exports=n(72)},52:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(21),u=n.n(o),c=n(15),i=n(10),l=n(19),s=(n(51),n(52),n(40)),f=n(11),d=n(12),p=n(14),m=n(13),h=n(9),b=n(20),g=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){console.log("logout"),this.props.onLogout()}},{key:"render",value:function(){return a.a.createElement(h.a,{to:"/"})}}]),n}(r.Component),v=Object(c.b)(null,(function(t){return{onLogout:function(){return t(b.e())}}}))(g),j=function(t){return function(e){Object(p.a)(r,e);var n=Object(m.a)(r);function r(){var t;Object(f.a)(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))).state={component:null},t}return Object(d.a)(r,[{key:"componentDidMount",value:function(){var e=this;t().then((function(t){e.setState({component:t.default})}))}},{key:"render",value:function(){var t=this.state.component;return t?a.a.createElement(t,this.props):null}}]),r}(r.Component)},A=(n(71),j((function(){return n.e(6).then(n.bind(null,101))}))),T=j((function(){return n.e(7).then(n.bind(null,103))})),O=j((function(){return n.e(5).then(n.bind(null,104))})),y=j((function(){return n.e(3).then(n.bind(null,102))})),I=j((function(){return n.e(4).then(n.bind(null,87))})),E=function(t){Object(p.a)(n,t);var e=Object(m.a)(n);function n(){return Object(f.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){var t=a.a.createElement(h.d,null,a.a.createElement(h.b,{path:"/",exact:!0,component:T}),a.a.createElement(h.b,{path:"/guest",exact:!0,component:A}),a.a.createElement(h.b,{path:"/smeauth",exact:!0,component:O}),a.a.createElement(h.a,{to:"/"}));return this.props.isAuthenticated&&(t=a.a.createElement(h.d,null,a.a.createElement(h.b,{path:"/form",exact:!0,component:I}),a.a.createElement(h.b,{path:"/main",exact:!0,component:y}),a.a.createElement(h.b,{path:"/logout",exact:!0,component:v}),a.a.createElement(h.b,{path:"/",exact:!0,component:T}),a.a.createElement(h.b,{path:"/guest",exact:!0,component:A}),a.a.createElement(h.b,{path:"/smeauth",exact:!0,component:O}),a.a.createElement(h.a,{to:"/"}))),a.a.createElement("div",null,t)}}]),n}(a.a.Component),D=Object(h.g)(Object(c.b)((function(t){return{isAuthenticated:null!==t.auth.token}}),(function(t){return{onTryAutoSignup:function(){return t(b.c())}}}))(E)),S=n(2),k=n(3),_={pages:[],purchased:!1,token:null,userId:null,error:null,loading:!1,form:!1,authRedirectPath:"/main"},x=function(t,e){return Object(k.b)(t,{error:null,loading:!0})},C=function(t,e){return Object(k.b)(t,{token:e.idToken,userId:e.userId,error:null,loading:!1,form:e.redirectPath})},w=function(t,e){return Object(k.b)(t,{error:e.error,loading:!1})},z=function(t,e){return Object(k.b)(t,{token:null,userId:null})},R=function(t,e){return Object(k.b)(t,{authRedirectPath:e.path})},F=function(t){return Object(k.b)(t,{purchased:!1})},L=function(t){return Object(k.b)(t,{loading:!0})},U=function(t,e,n){var r=Object(k.b)(e.pageData,{id:e.pageId});return Object(k.b)(t,{loading:!1,purchased:!0,form:!1,pages:t.pages.concat(r)})},H=function(t){return Object(k.b)(t,{loading:!1})},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S.g:return x(t);case S.h:return C(t,e);case S.e:return w(t,e);case S.f:return z(t);case S.l:return R(t,e);case S.b:return F(t);case S.c:return L(t);case S.d:return U(t,e);case S.a:return H(t);default:return t}},P={profiles:[],loading:!1,purchased:!1},M=function(t){return Object(k.b)(t,{loading:!0})},$=function(t,e){return Object(k.b)(t,{profiles:e.data,loading:!1})},J=function(t){return Object(k.b)(t,{loading:!1})},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case S.j:return M(t);case S.k:return $(t,e);case S.i:return J(t);default:return t}},X=i.d,q=Object(i.c)({auth:W,prodata:N}),B=Object(i.e)(q,X(Object(i.a)(s.a))),G=a.a.createElement(c.a,{store:B},a.a.createElement(l.a,null,a.a.createElement(D,null)));u.a.render(G,document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.3efaffe8.chunk.js.map